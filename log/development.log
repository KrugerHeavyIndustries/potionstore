# Logfile created on Thu Jun 21 22:00:57 -0700 2007 by /


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 22:52:15) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)


MissingSourceFile (no such file to load -- postgres):
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `postgresql_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `connection_without_query_cache='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/query_cache.rb:54:in `connection='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:230:in `retrieve_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1402:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1309:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1388:in `sanitize_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1163:in `add_conditions!'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1096:in `construct_finder_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:997:in `find_every'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:418:in `find'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/deprecated_finders.rb:39:in `find_all_without_deprecation'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/deprecation.rb:94:in `find_all'
    .//app/controllers/store/order_controller.rb:25:in `new'
    .//app/controllers/store/order_controller.rb:13:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 22:54:00) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)


MissingSourceFile (no such file to load -- postgres):
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `postgresql_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `connection_without_query_cache='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/query_cache.rb:54:in `connection='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:230:in `retrieve_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1402:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1309:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1388:in `sanitize_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1163:in `add_conditions!'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1096:in `construct_finder_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:997:in `find_every'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:418:in `find'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/deprecated_finders.rb:39:in `find_all_without_deprecation'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/deprecation.rb:94:in `find_all'
    .//app/controllers/store/order_controller.rb:25:in `new'
    .//app/controllers/store/order_controller.rb:13:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 22:55:46) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)


MissingSourceFile (no such file to load -- postgres):
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `postgresql_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `connection_without_query_cache='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/query_cache.rb:54:in `connection='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:230:in `retrieve_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1402:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1309:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1388:in `sanitize_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1163:in `add_conditions!'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1096:in `construct_finder_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:997:in `find_every'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:418:in `find'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/deprecated_finders.rb:39:in `find_all_without_deprecation'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/deprecation.rb:94:in `find_all'
    .//app/controllers/store/order_controller.rb:25:in `new'
    .//app/controllers/store/order_controller.rb:13:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 22:55:48) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)


MissingSourceFile (no such file to load -- postgres):
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `postgresql_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `connection_without_query_cache='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/query_cache.rb:54:in `connection='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:230:in `retrieve_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1402:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1309:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1388:in `sanitize_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1163:in `add_conditions!'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1096:in `construct_finder_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:997:in `find_every'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:418:in `find'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/deprecated_finders.rb:39:in `find_all_without_deprecation'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/deprecation.rb:94:in `find_all'
    .//app/controllers/store/order_controller.rb:25:in `new'
    .//app/controllers/store/order_controller.rb:13:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 22:58:15) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)


MissingSourceFile (no such file to load -- postgres):
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `postgresql_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `connection_without_query_cache='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/query_cache.rb:54:in `connection='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:230:in `retrieve_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1402:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1309:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1388:in `sanitize_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1163:in `add_conditions!'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1096:in `construct_finder_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:997:in `find_every'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:418:in `find'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/deprecated_finders.rb:39:in `find_all_without_deprecation'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/deprecation.rb:94:in `find_all'
    .//app/controllers/store/order_controller.rb:25:in `new'
    .//app/controllers/store/order_controller.rb:13:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 23:00:00) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)


MissingSourceFile (no such file to load -- postgres):
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/postgresql_adapter.rb:7:in `postgresql_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:262:in `connection_without_query_cache='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/query_cache.rb:54:in `connection='
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:230:in `retrieve_connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:78:in `connection'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1402:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1309:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `map'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1401:in `sanitize_sql_hash'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1388:in `sanitize_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1163:in `add_conditions!'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:1096:in `construct_finder_sql'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:997:in `find_every'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/base.rb:418:in `find'
    /usr/local/lib/ruby/gems/1.8/gems/activerecord-1.15.3/lib/active_record/deprecated_finders.rb:39:in `find_all_without_deprecation'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/deprecation.rb:94:in `find_all'
    .//app/controllers/store/order_controller.rb:25:in `new'
    .//app/controllers/store/order_controller.rb:13:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 23:00:56) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)
  [4;36;1mSQL (0.145132)[0m   [0;1mSET client_encoding TO 'utf8'[0m
  [4;35;1mProduct Load (0.298814)[0m   [0mSELECT * FROM products WHERE (products."active" = 1) [0m
Rendering layoutfalseactionnew within layouts/store
Rendering store/order/new
  [4;36;1mSQL (0.070146)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed in 1.18067 (0 reqs/sec) | Rendering: 0.03486 (2%) | DB: 0.51409 (43%) | 200 OK [http://localhost/store/]


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:00:57) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {}


ActionController::RoutingError (no route found to match "/themes/potionfactory/images/store/vc_small.png" with {:method=>:get}):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1292:in `recognize_path'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1282:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:00:57) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {}


ActionController::RoutingError (no route found to match "/themes/potionfactory/images/store/tgr_small.png" with {:method=>:get}):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1292:in `recognize_path'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1282:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:01:19) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}
Rendering layoutfalseactionsignin_form within layouts/error
Rendering admin/signin_form
Completed in 0.00691 (144 reqs/sec) | Rendering: 0.00679 (98%) | DB: 0.00000 (0%) | 200 OK [http://localhost/admin/]


Processing AdminController#signin (for 127.0.0.1 at 2007-06-23 23:01:23) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Abracadabra", "username"=>"andy", "action"=>"signin", "controller"=>"admin", "password"=>"joinus"}
Rendering layoutfalseactionsignin_form within layouts/error
Rendering admin/signin_form
Completed in 0.00358 (278 reqs/sec) | Rendering: 0.00259 (72%) | DB: 0.00000 (0%) | 200 OK [http://localhost/admin/signin]


Processing AdminController#signin (for 127.0.0.1 at 2007-06-23 23:01:32) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Abracadabra", "username"=>"username", "action"=>"signin", "controller"=>"admin", "password"=>"password"}
Rendering layoutfalseactionsignin_form within layouts/error
Rendering admin/signin_form
Completed in 0.00283 (353 reqs/sec) | Rendering: 0.00183 (64%) | DB: 0.00000 (0%) | 200 OK [http://localhost/admin/signin]


Processing AdminController#signin (for 127.0.0.1 at 2007-06-23 23:01:54) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Abracadabra", "username"=>"admin", "action"=>"signin", "controller"=>"admin", "password"=>"password"}
Redirected to http://localhost:3000/admin
Completed in 0.00160 (625 reqs/sec) | DB: 0.00000 (0%) | 302 Found [http://localhost/admin/signin]


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:01:54) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001257)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.026368)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.099808)[0m   [0mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and date(order_time) = current_date) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and date(order_time) = current_date group by product[0m
  [4;36;1mOrder Load (0.111394)[0m   [0;1mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and current_date - 7 <= order_time) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and current_date - 7 <= order_time group by product[0m
  [4;35;1mOrder Load (0.039651)[0m   [0mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and current_date - 30 <= order_time) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and current_date - 30 <= order_time group by product[0m
  [4;36;1mOrder Load (0.124279)[0m   [0;1mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and current_date - 365 <= order_time) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and current_date - 365 <= order_time group by product[0m
  [4;35;1mSQL (0.001378)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mOrder Load (0.092848)[0m   [0;1m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 date_part('day', orders.order_time) as day,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders 
 			 inner join line_items on orders.id = line_items.order_id 
 			 left outer join coupons on coupons.id = orders.coupon_id 

 		where status = 'C' and payment_type != 'Free'

 		group by year, month, day

 		order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067136)[0m   [0m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders
 			 inner join line_items on orders.id = line_items.order_id
 			 left outer join coupons on coupons.id = orders.coupon_id

 		where status = 'C' and payment_type != 'Free'

 		group by year, month

 		order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.62039 (1 reqs/sec) | Rendering: 0.03251 (5%) | DB: 0.56412 (90%) | 200 OK [http://localhost/admin]


Processing AdminController#orders (for 127.0.0.1 at 2007-06-23 23:02:06) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"orders", "controller"=>"admin"}
  [4;36;1mSQL (0.001495)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.007407)[0m   [0mSELECT count(*) AS count_all FROM orders WHERE (status != 'P') [0m
  [4;36;1mOrder Load (0.044243)[0m   [0;1mSELECT * FROM orders WHERE (status != 'P') ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering  within layouts/admin
Rendering admin/orders
  [4;35;1mLineItem Load (0.016709)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9110) [0m
  [4;36;1mSQL (0.001059)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mLineItem Load (0.000564)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9109) [0m
  [4;36;1mLineItem Load (0.000435)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9107) [0m
  [4;35;1mLineItem Load (0.000347)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9105) [0m
  [4;36;1mLineItem Load (0.000549)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9104) [0m
  [4;35;1mLineItem Load (0.000378)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9103) [0m
  [4;36;1mLineItem Load (0.000376)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9102) [0m
  [4;35;1mLineItem Load (0.000353)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9101) [0m
  [4;36;1mLineItem Load (0.000344)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9100) [0m
  [4;35;1mLineItem Load (0.000358)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9099) [0m
  [4;36;1mLineItem Load (0.000353)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9098) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9097) [0m
  [4;36;1mLineItem Load (0.000345)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9096) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9093) [0m
  [4;36;1mLineItem Load (0.000346)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9092) [0m
  [4;35;1mLineItem Load (0.000398)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9091) [0m
  [4;36;1mLineItem Load (0.000368)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9090) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9089) [0m
  [4;36;1mLineItem Load (0.000346)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9088) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9087) [0m
  [4;36;1mLineItem Load (0.000332)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9086) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9084) [0m
  [4;36;1mLineItem Load (0.000332)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9083) [0m
  [4;35;1mLineItem Load (0.000333)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9075) [0m
  [4;36;1mLineItem Load (0.000333)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9071) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9070) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9069) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9068) [0m
  [4;36;1mLineItem Load (0.000346)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9067) [0m
  [4;35;1mLineItem Load (0.000391)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9066) [0m
  [4;36;1mLineItem Load (0.000340)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9065) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9064) [0m
  [4;36;1mLineItem Load (0.000336)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9062) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9061) [0m
  [4;36;1mLineItem Load (0.000344)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9060) [0m
  [4;35;1mLineItem Load (0.000323)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9059) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9057) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9056) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9055) [0m
  [4;35;1mLineItem Load (0.000318)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9054) [0m
  [4;36;1mLineItem Load (0.000406)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9053) [0m
  [4;35;1mLineItem Load (0.000354)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9029) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9028) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9027) [0m
  [4;36;1mLineItem Load (0.000431)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9026) [0m
  [4;35;1mLineItem Load (0.000354)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9022) [0m
  [4;36;1mLineItem Load (0.000331)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9021) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9020) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9018) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9017) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9016) [0m
  [4;35;1mLineItem Load (0.002257)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9015) [0m
  [4;36;1mLineItem Load (0.000432)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9014) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9013) [0m
  [4;36;1mLineItem Load (0.000350)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9012) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9011) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9010) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9009) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9008) [0m
  [4;35;1mLineItem Load (0.000350)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9007) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9006) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9003) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9000) [0m
  [4;35;1mLineItem Load (0.000412)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8612) [0m
  [4;36;1mLineItem Load (0.000432)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8611) [0m
  [4;35;1mLineItem Load (0.000427)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8610) [0m
  [4;36;1mLineItem Load (0.000421)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8609) [0m
  [4;35;1mLineItem Load (0.000422)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8608) [0m
  [4;36;1mLineItem Load (0.000560)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8607) [0m
  [4;35;1mLineItem Load (0.000425)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8606) [0m
  [4;36;1mLineItem Load (0.000410)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8605) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8604) [0m
  [4;36;1mLineItem Load (0.000336)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8603) [0m
  [4;35;1mLineItem Load (0.000404)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8602) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8601) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8600) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8599) [0m
  [4;35;1mLineItem Load (0.000364)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8598) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8597) [0m
  [4;35;1mLineItem Load (0.000426)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8596) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8595) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8594) [0m
  [4;36;1mLineItem Load (0.000338)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8593) [0m
  [4;35;1mLineItem Load (0.000366)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8592) [0m
  [4;36;1mLineItem Load (0.000428)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8591) [0m
  [4;35;1mLineItem Load (0.000342)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8590) [0m
  [4;36;1mLineItem Load (0.000804)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8589) [0m
  [4;35;1mLineItem Load (0.000353)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8588) [0m
  [4;36;1mLineItem Load (0.000367)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8587) [0m
  [4;35;1mLineItem Load (0.000346)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8586) [0m
  [4;36;1mLineItem Load (0.000341)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8585) [0m
  [4;35;1mLineItem Load (0.000336)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8584) [0m
  [4;36;1mLineItem Load (0.000342)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8583) [0m
  [4;35;1mLineItem Load (0.000355)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8582) [0m
  [4;36;1mLineItem Load (0.000346)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8581) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8580) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8579) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8578) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8577) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8576) [0m
Completed in 0.41669 (2 reqs/sec) | Rendering: 0.28956 (69%) | DB: 0.10879 (26%) | 200 OK [http://localhost/admin/orders]


Processing AdminController#order (for 127.0.0.1 at 2007-06-23 23:02:18) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"order", "id"=>"9110", "controller"=>"admin"}
  [4;36;1mSQL (0.001342)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.015328)[0m   [0mSELECT * FROM orders WHERE (orders."id" = 9110) [0m
Rendering  within layouts/admin
Rendering admin/order
  [4;36;1mLineItem Load (0.000583)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9110) [0m
  [4;35;1mSQL (0.001201)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.001035)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mProduct Load (0.000441)[0m   [0mSELECT * FROM products WHERE (products."id" = 2) [0m
Rendered store/order/_receipt (0.04026)
Completed in 0.07696 (12 reqs/sec) | Rendering: 0.04342 (56%) | DB: 0.01993 (25%) | 200 OK [http://localhost/admin/order/9110]


Processing AdminController#orders (for 127.0.0.1 at 2007-06-23 23:02:23) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"orders", "controller"=>"admin"}
  [4;36;1mSQL (0.001350)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.004179)[0m   [0mSELECT count(*) AS count_all FROM orders WHERE (status != 'P') [0m
  [4;36;1mOrder Load (0.041271)[0m   [0;1mSELECT * FROM orders WHERE (status != 'P') ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering  within layouts/admin
Rendering admin/orders
  [4;35;1mLineItem Load (0.000530)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9110) [0m
  [4;36;1mSQL (0.001004)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mLineItem Load (0.000512)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9109) [0m
  [4;36;1mLineItem Load (0.000361)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9107) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9105) [0m
  [4;36;1mLineItem Load (0.000334)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9104) [0m
  [4;35;1mLineItem Load (0.000336)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9103) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9102) [0m
  [4;35;1mLineItem Load (0.000325)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9101) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9100) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9099) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9098) [0m
  [4;35;1mLineItem Load (0.000318)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9097) [0m
  [4;36;1mLineItem Load (0.000322)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9096) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9093) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9092) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9091) [0m
  [4;36;1mLineItem Load (0.000394)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9090) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9089) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9088) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9087) [0m
  [4;36;1mLineItem Load (0.000332)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9086) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9084) [0m
  [4;36;1mLineItem Load (0.000416)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9083) [0m
  [4;35;1mLineItem Load (0.000334)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9075) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9071) [0m
  [4;35;1mLineItem Load (0.000346)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9070) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9069) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9068) [0m
  [4;36;1mLineItem Load (0.000341)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9067) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9066) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9065) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9064) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9062) [0m
  [4;35;1mLineItem Load (0.000328)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9061) [0m
  [4;36;1mLineItem Load (0.000372)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9060) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9059) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9057) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9056) [0m
  [4;36;1mLineItem Load (0.000349)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9055) [0m
  [4;35;1mLineItem Load (0.000328)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9054) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9053) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9029) [0m
  [4;36;1mLineItem Load (0.000332)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9028) [0m
  [4;35;1mLineItem Load (0.000323)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9027) [0m
  [4;36;1mLineItem Load (0.000334)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9026) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9022) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9021) [0m
  [4;35;1mLineItem Load (0.000325)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9020) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9018) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9017) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9016) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9015) [0m
  [4;36;1mLineItem Load (0.000329)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9014) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9013) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9012) [0m
  [4;35;1mLineItem Load (0.000335)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9011) [0m
  [4;36;1mLineItem Load (0.000329)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9010) [0m
  [4;35;1mLineItem Load (0.000416)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9009) [0m
  [4;36;1mLineItem Load (0.000480)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9008) [0m
  [4;35;1mLineItem Load (0.000384)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9007) [0m
  [4;36;1mLineItem Load (0.000340)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9006) [0m
  [4;35;1mLineItem Load (0.000345)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9003) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9000) [0m
  [4;35;1mLineItem Load (0.000363)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8612) [0m
  [4;36;1mLineItem Load (0.000418)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8611) [0m
  [4;35;1mLineItem Load (0.000341)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8610) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8609) [0m
  [4;35;1mLineItem Load (0.000334)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8608) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8607) [0m
  [4;35;1mLineItem Load (0.000319)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8606) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8605) [0m
  [4;35;1mLineItem Load (0.000333)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8604) [0m
  [4;36;1mLineItem Load (0.000329)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8603) [0m
  [4;35;1mLineItem Load (0.000334)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8602) [0m
  [4;36;1mLineItem Load (0.000352)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8601) [0m
  [4;35;1mLineItem Load (0.000331)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8600) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8599) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8598) [0m
  [4;36;1mLineItem Load (0.000335)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8597) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8596) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8595) [0m
  [4;35;1mLineItem Load (0.000356)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8594) [0m
  [4;36;1mLineItem Load (0.000362)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8593) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8592) [0m
  [4;36;1mLineItem Load (0.000378)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8591) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8590) [0m
  [4;36;1mLineItem Load (0.000344)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8589) [0m
  [4;35;1mLineItem Load (0.000363)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8588) [0m
  [4;36;1mLineItem Load (0.000342)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8587) [0m
  [4;35;1mLineItem Load (0.000343)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8586) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8585) [0m
  [4;35;1mLineItem Load (0.000362)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8584) [0m
  [4;36;1mLineItem Load (0.000349)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8583) [0m
  [4;35;1mLineItem Load (0.000331)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8582) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8581) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8580) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8579) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8578) [0m
  [4;36;1mLineItem Load (0.000337)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8577) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8576) [0m
Completed in 0.27786 (3 reqs/sec) | Rendering: 0.17789 (64%) | DB: 0.08212 (29%) | 200 OK [http://localhost/admin/orders]


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:02:24) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001230)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000272)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.016746)[0m   [0;1mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and date(order_time) = current_date) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and date(order_time) = current_date group by product[0m
  [4;35;1mOrder Load (0.039318)[0m   [0mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and current_date - 7 <= order_time) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and current_date - 7 <= order_time group by product[0m
  [4;36;1mOrder Load (0.039441)[0m   [0;1mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and current_date - 30 <= order_time) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and current_date - 30 <= order_time group by product[0m
  [4;35;1mOrder Load (0.085304)[0m   [0mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and current_date - 365 <= order_time) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and current_date - 365 <= order_time group by product[0m
  [4;36;1mSQL (0.001377)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.072562)[0m   [0m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 date_part('day', orders.order_time) as day,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders 
 			 inner join line_items on orders.id = line_items.order_id 
 			 left outer join coupons on coupons.id = orders.coupon_id 

 		where status = 'C' and payment_type != 'Free'

 		group by year, month, day

 		order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067022)[0m   [0;1m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders
 			 inner join line_items on orders.id = line_items.order_id
 			 left outer join coupons on coupons.id = orders.coupon_id

 		where status = 'C' and payment_type != 'Free'

 		group by year, month

 		order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.44020 (2 reqs/sec) | Rendering: 0.09457 (21%) | DB: 0.32327 (73%) | 200 OK [http://localhost/admin]


Processing AdminController#orders (for 127.0.0.1 at 2007-06-23 23:04:49) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"orders", "controller"=>"admin"}
  [4;35;1mSQL (0.001497)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.006445)[0m   [0;1mSELECT count(*) AS count_all FROM orders WHERE (status != 'P') [0m
  [4;35;1mOrder Load (0.041652)[0m   [0mSELECT * FROM orders WHERE (status != 'P') ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering  within layouts/admin
Rendering admin/orders
  [4;36;1mLineItem Load (0.000563)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9110) [0m
  [4;35;1mSQL (0.001017)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mLineItem Load (0.000520)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9109) [0m
  [4;35;1mLineItem Load (0.000349)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9107) [0m
  [4;36;1mLineItem Load (0.000471)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9105) [0m
  [4;35;1mLineItem Load (0.000669)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9104) [0m
  [4;36;1mLineItem Load (0.000481)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9103) [0m
  [4;35;1mLineItem Load (0.000356)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9102) [0m
  [4;36;1mLineItem Load (0.000456)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9101) [0m
  [4;35;1mLineItem Load (0.000404)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9100) [0m
  [4;36;1mLineItem Load (0.000351)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9099) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9098) [0m
  [4;36;1mLineItem Load (0.000383)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9097) [0m
  [4;35;1mLineItem Load (0.000454)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9096) [0m
  [4;36;1mLineItem Load (0.000351)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9093) [0m
  [4;35;1mLineItem Load (0.000375)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9092) [0m
  [4;36;1mLineItem Load (0.000345)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9091) [0m
  [4;35;1mLineItem Load (0.000323)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9090) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9089) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9088) [0m
  [4;36;1mLineItem Load (0.000332)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9087) [0m
  [4;35;1mLineItem Load (0.000322)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9086) [0m
  [4;36;1mLineItem Load (0.000322)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9084) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9083) [0m
  [4;36;1mLineItem Load (0.000339)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9075) [0m
  [4;35;1mLineItem Load (0.000349)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9071) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9070) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9069) [0m
  [4;36;1mLineItem Load (0.000323)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9068) [0m
  [4;35;1mLineItem Load (0.000351)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9067) [0m
  [4;36;1mLineItem Load (0.000329)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9066) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9065) [0m
  [4;36;1mLineItem Load (0.000321)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9064) [0m
  [4;35;1mLineItem Load (0.000322)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9062) [0m
  [4;36;1mLineItem Load (0.000321)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9061) [0m
  [4;35;1mLineItem Load (0.000325)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9060) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9059) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9057) [0m
  [4;36;1mLineItem Load (0.000398)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9056) [0m
  [4;35;1mLineItem Load (0.000893)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9055) [0m
  [4;36;1mLineItem Load (0.001172)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9054) [0m
  [4;35;1mLineItem Load (0.000513)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9053) [0m
  [4;36;1mLineItem Load (0.000432)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9029) [0m
  [4;35;1mLineItem Load (0.000414)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9028) [0m
  [4;36;1mLineItem Load (0.000418)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9027) [0m
  [4;35;1mLineItem Load (0.000444)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9026) [0m
  [4;36;1mLineItem Load (0.000488)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9022) [0m
  [4;35;1mLineItem Load (0.000510)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9021) [0m
  [4;36;1mLineItem Load (0.000437)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9020) [0m
  [4;35;1mLineItem Load (0.000428)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9018) [0m
  [4;36;1mLineItem Load (0.000391)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9017) [0m
  [4;35;1mLineItem Load (0.000414)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9016) [0m
  [4;36;1mLineItem Load (0.000437)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9015) [0m
  [4;35;1mLineItem Load (0.000442)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9014) [0m
  [4;36;1mLineItem Load (0.000415)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9013) [0m
  [4;35;1mLineItem Load (0.000443)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9012) [0m
  [4;36;1mLineItem Load (0.000453)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9011) [0m
  [4;35;1mLineItem Load (0.000512)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9010) [0m
  [4;36;1mLineItem Load (0.000497)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9009) [0m
  [4;35;1mLineItem Load (0.000479)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9008) [0m
  [4;36;1mLineItem Load (0.000433)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9007) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9006) [0m
  [4;36;1mLineItem Load (0.000446)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9003) [0m
  [4;35;1mLineItem Load (0.000606)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9000) [0m
  [4;36;1mLineItem Load (0.000491)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8612) [0m
  [4;35;1mLineItem Load (0.000363)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8611) [0m
  [4;36;1mLineItem Load (0.000338)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8610) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8609) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8608) [0m
  [4;35;1mLineItem Load (0.000323)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8607) [0m
  [4;36;1mLineItem Load (0.000342)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8606) [0m
  [4;35;1mLineItem Load (0.000399)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8605) [0m
  [4;36;1mLineItem Load (0.000340)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8604) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8603) [0m
  [4;36;1mLineItem Load (0.000400)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8602) [0m
  [4;35;1mLineItem Load (0.000341)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8601) [0m
  [4;36;1mLineItem Load (0.000446)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8600) [0m
  [4;35;1mLineItem Load (0.000362)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8599) [0m
  [4;36;1mLineItem Load (0.000335)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8598) [0m
  [4;35;1mLineItem Load (0.000335)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8597) [0m
  [4;36;1mLineItem Load (0.000441)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8596) [0m
  [4;35;1mLineItem Load (0.000350)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8595) [0m
  [4;36;1mLineItem Load (0.000355)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8594) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8593) [0m
  [4;36;1mLineItem Load (0.000340)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8592) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8591) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8590) [0m
  [4;35;1mLineItem Load (0.000418)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8589) [0m
  [4;36;1mLineItem Load (0.000355)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8588) [0m
  [4;35;1mLineItem Load (0.000350)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8587) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8586) [0m
  [4;35;1mLineItem Load (0.000345)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8585) [0m
  [4;36;1mLineItem Load (0.000338)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8584) [0m
  [4;35;1mLineItem Load (0.000344)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8583) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8582) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8581) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8580) [0m
  [4;35;1mLineItem Load (0.000329)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8579) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8578) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8577) [0m
  [4;36;1mLineItem Load (0.000365)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8576) [0m
Completed in 0.29387 (3 reqs/sec) | Rendering: 0.18510 (62%) | DB: 0.09034 (30%) | 200 OK [http://localhost/admin/orders]


Processing AdminController#find_orders (for 127.0.0.1 at 2007-06-23 23:04:52) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Search", "action"=>"find_orders", "controller"=>"admin", "query"=>"9109"}
  [4;35;1mSQL (0.001356)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.061511)[0m   [0;1mSELECT count(*) AS count_all FROM orders WHERE (status != 'P' AND (email ~* '9109' OR
									 first_name ~* '9109.*' OR
									 last_name ~* '9109.*' OR
									 licensee_name ~* '%9109.*' OR
									 id = 9109)) [0m
  [4;35;1mOrder Load (0.047443)[0m   [0mSELECT * FROM orders WHERE (status != 'P' AND (email ~* '9109' OR
									 first_name ~* '9109.*' OR
									 last_name ~* '9109.*' OR
									 licensee_name ~* '%9109.*' OR
									 id = 9109)) ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering layoutfalseactionorders within layouts/admin
Rendering admin/orders
  [4;36;1mLineItem Load (0.000533)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9109) [0m
  [4;35;1mSQL (0.001053)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed in 0.14457 (6 reqs/sec) | Rendering: 0.02087 (14%) | DB: 0.11190 (77%) | 200 OK [http://localhost/admin/find_orders]


Processing AdminController#find_orders (for 127.0.0.1 at 2007-06-23 23:04:58) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Search", "action"=>"find_orders", "controller"=>"admin", "query"=>"9108"}
  [4;36;1mSQL (0.001335)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.048567)[0m   [0mSELECT count(*) AS count_all FROM orders WHERE (status != 'P' AND (email ~* '9108' OR
									 first_name ~* '9108.*' OR
									 last_name ~* '9108.*' OR
									 licensee_name ~* '%9108.*' OR
									 id = 9108)) [0m
  [4;36;1mOrder Load (0.048568)[0m   [0;1mSELECT * FROM orders WHERE (status != 'P' AND (email ~* '9108' OR
									 first_name ~* '9108.*' OR
									 last_name ~* '9108.*' OR
									 licensee_name ~* '%9108.*' OR
									 id = 9108)) ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering layoutfalseactionorders within layouts/admin
Rendering admin/orders
Completed in 0.11242 (8 reqs/sec) | Rendering: 0.00289 (2%) | DB: 0.09847 (87%) | 200 OK [http://localhost/admin/find_orders]


Processing AdminController#orders (for 127.0.0.1 at 2007-06-23 23:05:01) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"orders", "controller"=>"admin"}
  [4;35;1mSQL (0.001384)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.006953)[0m   [0;1mSELECT count(*) AS count_all FROM orders WHERE (status != 'P') [0m
  [4;35;1mOrder Load (0.044601)[0m   [0mSELECT * FROM orders WHERE (status != 'P') ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering  within layouts/admin
Rendering admin/orders
  [4;36;1mLineItem Load (0.000653)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9110) [0m
  [4;35;1mSQL (0.001316)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mLineItem Load (0.000780)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9109) [0m
  [4;35;1mLineItem Load (0.000560)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9107) [0m
  [4;36;1mLineItem Load (0.000401)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9105) [0m
  [4;35;1mLineItem Load (0.000349)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9104) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9103) [0m
  [4;35;1mLineItem Load (0.000359)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9102) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9101) [0m
  [4;35;1mLineItem Load (0.000351)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9100) [0m
  [4;36;1mLineItem Load (0.000467)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9099) [0m
  [4;35;1mLineItem Load (0.000333)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9098) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9097) [0m
  [4;35;1mLineItem Load (0.000367)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9096) [0m
  [4;36;1mLineItem Load (0.000336)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9093) [0m
  [4;35;1mLineItem Load (0.000457)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9092) [0m
  [4;36;1mLineItem Load (0.000369)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9091) [0m
  [4;35;1mLineItem Load (0.000381)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9090) [0m
  [4;36;1mLineItem Load (0.000475)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9089) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9088) [0m
  [4;36;1mLineItem Load (0.000374)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9087) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9086) [0m
  [4;36;1mLineItem Load (0.000322)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9084) [0m
  [4;35;1mLineItem Load (0.000333)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9083) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9075) [0m
  [4;35;1mLineItem Load (0.000852)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9071) [0m
  [4;36;1mLineItem Load (0.000445)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9070) [0m
  [4;35;1mLineItem Load (0.000353)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9069) [0m
  [4;36;1mLineItem Load (0.000374)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9068) [0m
  [4;35;1mLineItem Load (0.000350)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9067) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9066) [0m
  [4;35;1mLineItem Load (0.000322)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9065) [0m
  [4;36;1mLineItem Load (0.000339)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9064) [0m
  [4;35;1mLineItem Load (0.000385)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9062) [0m
  [4;36;1mLineItem Load (0.000455)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9061) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9060) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9059) [0m
  [4;35;1mLineItem Load (0.000348)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9057) [0m
  [4;36;1mLineItem Load (0.000345)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9056) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9055) [0m
  [4;36;1mLineItem Load (0.000337)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9054) [0m
  [4;35;1mLineItem Load (0.000385)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9053) [0m
  [4;36;1mLineItem Load (0.000445)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9029) [0m
  [4;35;1mLineItem Load (0.000385)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9028) [0m
  [4;36;1mLineItem Load (0.000355)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9027) [0m
  [4;35;1mLineItem Load (0.000344)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9026) [0m
  [4;36;1mLineItem Load (0.000327)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9022) [0m
  [4;35;1mLineItem Load (0.000339)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9021) [0m
  [4;36;1mLineItem Load (0.000335)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9020) [0m
  [4;35;1mLineItem Load (0.000885)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9018) [0m
  [4;36;1mLineItem Load (0.000421)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9017) [0m
  [4;35;1mLineItem Load (0.000364)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9016) [0m
  [4;36;1mLineItem Load (0.000331)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9015) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9014) [0m
  [4;36;1mLineItem Load (0.000342)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9013) [0m
  [4;35;1mLineItem Load (0.000547)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9012) [0m
  [4;36;1mLineItem Load (0.000400)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9011) [0m
  [4;35;1mLineItem Load (0.000374)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9010) [0m
  [4;36;1mLineItem Load (0.000370)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9009) [0m
  [4;35;1mLineItem Load (0.000358)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9008) [0m
  [4;36;1mLineItem Load (0.000363)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9007) [0m
  [4;35;1mLineItem Load (0.000402)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9006) [0m
  [4;36;1mLineItem Load (0.000353)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9003) [0m
  [4;35;1mLineItem Load (0.000347)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9000) [0m
  [4;36;1mLineItem Load (0.000352)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8612) [0m
  [4;35;1mLineItem Load (0.000351)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8611) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8610) [0m
  [4;35;1mLineItem Load (0.000343)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8609) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8608) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8607) [0m
  [4;36;1mLineItem Load (0.000377)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8606) [0m
  [4;35;1mLineItem Load (0.000384)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8605) [0m
  [4;36;1mLineItem Load (0.000341)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8604) [0m
  [4;35;1mLineItem Load (0.000333)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8603) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8602) [0m
  [4;35;1mLineItem Load (0.000334)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8601) [0m
  [4;36;1mLineItem Load (0.000340)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8600) [0m
  [4;35;1mLineItem Load (0.000335)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8599) [0m
  [4;36;1mLineItem Load (0.000400)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8598) [0m
  [4;35;1mLineItem Load (0.000356)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8597) [0m
  [4;36;1mLineItem Load (0.000352)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8596) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8595) [0m
  [4;36;1mLineItem Load (0.000345)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8594) [0m
  [4;35;1mLineItem Load (0.000355)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8593) [0m
  [4;36;1mLineItem Load (0.000342)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8592) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8591) [0m
  [4;36;1mLineItem Load (0.000329)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8590) [0m
  [4;35;1mLineItem Load (0.000421)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8589) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8588) [0m
  [4;35;1mLineItem Load (0.000338)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8587) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8586) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8585) [0m
  [4;36;1mLineItem Load (0.000346)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8584) [0m
  [4;35;1mLineItem Load (0.000343)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8583) [0m
  [4;36;1mLineItem Load (0.000406)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8582) [0m
  [4;35;1mLineItem Load (0.000381)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8581) [0m
  [4;36;1mLineItem Load (0.000335)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8580) [0m
  [4;35;1mLineItem Load (0.000478)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8579) [0m
  [4;36;1mLineItem Load (0.000348)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8578) [0m
  [4;35;1mLineItem Load (0.000327)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8577) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8576) [0m
Completed in 0.38830 (2 reqs/sec) | Rendering: 0.27647 (71%) | DB: 0.09237 (23%) | 200 OK [http://localhost/admin/orders]


Processing AdminController#find_orders (for 127.0.0.1 at 2007-06-23 23:05:05) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Search", "action"=>"find_orders", "controller"=>"admin", "query"=>"9107"}
  [4;35;1mSQL (0.001335)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.048327)[0m   [0;1mSELECT count(*) AS count_all FROM orders WHERE (status != 'P' AND (email ~* '9107' OR
									 first_name ~* '9107.*' OR
									 last_name ~* '9107.*' OR
									 licensee_name ~* '%9107.*' OR
									 id = 9107)) [0m
  [4;35;1mOrder Load (0.048341)[0m   [0mSELECT * FROM orders WHERE (status != 'P' AND (email ~* '9107' OR
									 first_name ~* '9107.*' OR
									 last_name ~* '9107.*' OR
									 licensee_name ~* '%9107.*' OR
									 id = 9107)) ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering layoutfalseactionorders within layouts/admin
Rendering admin/orders
  [4;36;1mLineItem Load (0.000525)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9107) [0m
  [4;35;1mSQL (0.001011)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed in 0.13153 (7 reqs/sec) | Rendering: 0.02071 (15%) | DB: 0.09954 (75%) | 200 OK [http://localhost/admin/find_orders]


Processing AdminController#find_orders (for 127.0.0.1 at 2007-06-23 23:05:10) [POST]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"commit"=>"Search", "action"=>"find_orders", "controller"=>"admin", "query"=>"91"}
  [4;36;1mSQL (0.001367)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.044413)[0m   [0mSELECT count(*) AS count_all FROM orders WHERE (status != 'P' AND (email ~* '91' OR
									 first_name ~* '91.*' OR
									 last_name ~* '91.*' OR
									 licensee_name ~* '%91.*' OR
									 id = 91)) [0m
  [4;36;1mOrder Load (0.044450)[0m   [0;1mSELECT * FROM orders WHERE (status != 'P' AND (email ~* '91' OR
									 first_name ~* '91.*' OR
									 last_name ~* '91.*' OR
									 licensee_name ~* '%91.*' OR
									 id = 91)) ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering layoutfalseactionorders within layouts/admin
Rendering admin/orders
  [4;35;1mLineItem Load (0.013986)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 7129) [0m
  [4;36;1mSQL (0.001066)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mLineItem Load (0.001079)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 5991) [0m
  [4;36;1mLineItem Load (0.000879)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 1517) [0m
  [4;35;1mLineItem Load (0.008833)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 91) [0m
Completed in 0.15360 (6 reqs/sec) | Rendering: 0.02588 (16%) | DB: 0.11607 (75%) | 200 OK [http://localhost/admin/find_orders]


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:16:54) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001370)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000317)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.016802)[0m   [0;1mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and date(order_time) = current_date) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and date(order_time) = current_date group by product[0m
  [4;35;1mOrder Load (0.038942)[0m   [0m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 7 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and payment_type != 'free' and current_date - 7 <= order_time
		 group by product[0m
  [4;36;1mOrder Load (0.039336)[0m   [0;1m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 30 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and payment_type != 'free' and current_date - 30 <= order_time
		 group by product[0m
  [4;35;1mOrder Load (0.087558)[0m   [0m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 365 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and payment_type != 'free' and current_date - 365 <= order_time
		 group by product[0m
  [4;36;1mSQL (0.001372)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.073443)[0m   [0m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 date_part('day', orders.order_time) as day,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders 
 			 inner join line_items on orders.id = line_items.order_id 
 			 left outer join coupons on coupons.id = orders.coupon_id 

 		where status = 'C' and payment_type != 'Free'

 		group by year, month, day

 		order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067468)[0m   [0;1m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders
 			 inner join line_items on orders.id = line_items.order_id
 			 left outer join coupons on coupons.id = orders.coupon_id

 		where status = 'C' and payment_type != 'Free'

 		group by year, month

 		order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.35550 (2 reqs/sec) | Rendering: 0.00529 (1%) | DB: 0.32661 (91%) | 200 OK [http://localhost/admin]


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:17:11) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}


SyntaxError (./script/../config/../app/controllers/admin_controller.rb:347: syntax error, unexpected $end, expecting kEND):
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:203:in `load_without_new_constant_marking'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:203:in `load_file'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:202:in `load_file'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:94:in `require_or_load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:248:in `load_missing_constant'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:452:in `const_missing'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:464:in `const_missing'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/inflector.rb:250:in `constantize'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/string/inflections.rb:148:in `constantize'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1284:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:17:15) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001354)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000314)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.019151)[0m   [0mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and date(order_time) = current_date) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and date(order_time) = current_date group by product[0m
  [4;36;1mOrder Load (0.039858)[0m   [0;1m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 7 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and payment_type != 'free' and current_date - 7 <= order_time
		 group by product[0m
  [4;35;1mOrder Load (0.039333)[0m   [0m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 30 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and payment_type != 'free' and current_date - 30 <= order_time
		 group by product[0m
  [4;36;1mOrder Load (0.085280)[0m   [0;1m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 365 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and payment_type != 'free' and current_date - 365 <= order_time
		 group by product[0m
  [4;35;1mSQL (0.001389)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mOrder Load (0.072996)[0m   [0;1m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 date_part('day', orders.order_time) as day,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders 
 			 inner join line_items on orders.id = line_items.order_id 
 			 left outer join coupons on coupons.id = orders.coupon_id 

 		where status = 'C' and payment_type != 'Free'

 		group by year, month, day

 		order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067914)[0m   [0m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders
 			 inner join line_items on orders.id = line_items.order_id
 			 left outer join coupons on coupons.id = orders.coupon_id

 		where status = 'C' and payment_type != 'Free'

 		group by year, month

 		order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.35431 (2 reqs/sec) | Rendering: 0.00461 (1%) | DB: 0.32759 (92%) | 200 OK [http://localhost/admin]


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:17:55) [GET]
  Session ID: 1d2432356daffaf1d712e8e97f93c236
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001386)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000308)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.019273)[0m   [0;1mselect (select count(*) from orders where status = 'C' and payment_type != 'free' and date(order_time) = current_date) as orders, sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0)) - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned, sum(quantity) as q, products.name as product from orders inner join line_items on orders.id = line_items.order_id left outer join products on products.id = line_items.product_id left outer join coupons on coupons.id = orders.coupon_id where status = 'C' and payment_type != 'free' and date(order_time) = current_date group by product[0m
  [4;35;1mOrder Load (0.064829)[0m   [0m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 7 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time
		 group by product[0m
  [4;36;1mOrder Load (0.040104)[0m   [0;1m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 30 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time
		 group by product[0m
  [4;35;1mOrder Load (0.081412)[0m   [0m
		select (select count(*)
				 from orders
				 where status = 'C' and
					 payment_type != 'free' and
					 current_date - 365 <= order_time) as orders,
			 sum(line_items.unit_price * quantity)
				 - sum(coalesce(coupons.amount, 0))
				 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
				sum(quantity) as q,
				products.name as product
		 from orders inner join line_items on orders.id = line_items.order_id
					 left outer join products on products.id = line_items.product_id
					 left outer join coupons on coupons.id = orders.coupon_id
		 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time
		 group by product[0m
  [4;36;1mSQL (0.001381)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.073206)[0m   [0m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 date_part('day', orders.order_time) as day,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders 
 			 inner join line_items on orders.id = line_items.order_id 
 			 left outer join coupons on coupons.id = orders.coupon_id 

 		where status = 'C' and payment_type != 'Free'

 		group by year, month, day

 		order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067690)[0m   [0;1m
 		select date_part('year', orders.order_time) as year,
 			 date_part('month', orders.order_time) as month,
 			 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 				- sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 			 max(orders.order_time) as last_time

 		from orders
 			 inner join line_items on orders.id = line_items.order_id
 			 left outer join coupons on coupons.id = orders.coupon_id

 		where status = 'C' and payment_type != 'Free'

 		group by year, month

 		order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.37872 (2 reqs/sec) | Rendering: 0.00551 (1%) | DB: 0.34959 (92%) | 200 OK [http://localhost/admin]


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 23:44:43) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)
  [4;35;1mProduct Load (0.000559)[0m   [0mSELECT * FROM products WHERE (products."active" = 1) [0m
Rendering layoutfalseactionnew within layouts/store
Rendering store/order/new
  [4;36;1mSQL (0.001285)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed in 0.05702 (17 reqs/sec) | Rendering: 0.00453 (7%) | DB: 0.00184 (3%) | 200 OK [http://localhost/store/]


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:44:43) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {}


ActionController::RoutingError (no route found to match "/themes/potionfactory/images/store/vc_small.png" with {:method=>:get}):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1292:in `recognize_path'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1282:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:44:43) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {}


ActionController::RoutingError (no route found to match "/themes/potionfactory/images/store/tgr_small.png" with {:method=>:get}):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1292:in `recognize_path'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1282:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing OrderController#payment (for 127.0.0.1 at 2007-06-23 23:44:46) [POST]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"items"=>{"2"=>"1", "3"=>""}, "commit"=>"  Continue →", "action"=>"payment", "controller"=>"store/order", "payment_type"=>"cc", "coupon"=>""}
  [4;35;1mSQL (0.001425)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.001203)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.011288)[0m   [0mSELECT * FROM orders WHERE (orders."id" = 0) [0m
  [4;36;1mSQL (0.001168)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mProduct Load (0.000328)[0m   [0mSELECT * FROM products WHERE (products."id" = 2) [0m
  [4;36;1mSQL (0.000147)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000107)[0m   [0mCOMMIT[0m
  [4;36;1mProduct Load (0.000323)[0m   [0;1mSELECT * FROM products WHERE (products."id" = 2) [0m
Rendering layoutfalseactionpayment_cc within layouts/store
Rendering store/order/payment_cc
Rendered store/order/_form_countries (0.01741)
Rendered store/order/_form_months (0.00160)
Completed in 0.08187 (12 reqs/sec) | Rendering: 0.03321 (40%) | DB: 0.01599 (19%) | 200 OK [http://localhost/store/order/payment]


Processing OrderController#purchase (for 127.0.0.1 at 2007-06-23 23:44:54) [POST]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"items"=>{"2"=>"1"}, "commit"=>"  Place Order →", "order"=>{"address1"=>"433 S. Serrano Ave.", "company"=>"ab", "city"=>"Los Angeles", "address2"=>"", "cc_month"=>"1", "cc_number"=>"4916306176169494", "zipcode"=>"90004", "country"=>"US", "cc_code"=>"000", "first_name"=>"Byung", "payment_type"=>"Visa", "last_name"=>"someone", "comment"=>"2", "state"=>"CA", "email"=>"andykim78@gmail.com", "cc_year"=>"2007", "licensee_name"=>"Andy Kim"}, "action"=>"purchase", "onsubmit"=>"javascript:return validate();", "controller"=>"store/order"}
  [4;35;1mSQL (0.001358)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.001200)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.000421)[0m   [0mSELECT * FROM orders WHERE (orders."id" = 0) [0m
  [4;36;1mSQL (0.001161)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mProduct Load (0.000310)[0m   [0mSELECT * FROM products WHERE (products."id" = 2) [0m
  [4;36;1mSQL (0.000117)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000107)[0m   [0mCOMMIT[0m
  [4;36;1mProduct Load (0.000308)[0m   [0;1mSELECT * FROM products WHERE (products."id" = 2) [0m
  [4;35;1mSQL (0.000109)[0m   [0mBEGIN[0m
  [4;36;1mPK and serial sequence (0.040337)[0m   [0;1m SELECT attr.attname, name.nspname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relnamespace = name.oid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'orders'::regclass
[0m
  [4;35;1mOrder Create (0.048156)[0m   [0mINSERT INTO orders ("address1", "city", "company", "status", "address2", "coupon_id", "failure_reason", "zipcode", "country", "ccnum", "failure_code", "first_name", "order_time", "payment_type", "comment", "last_name", "email", "licensee_name", "state", "transaction_number") VALUES('433 S. Serrano Ave.', 'Los Angeles', 'ab', 'P', '', NULL, NULL, '90004', 'US', 'XXXXXXXXXXXX9494', NULL, 'Byung', '2007-06-23 23:44:54.884570', 'Visa', '2', 'someone', 'andykim78@gmail.com', 'Andy Kim', 'CA', NULL)[0m
  [4;36;1mSQL (0.008850)[0m   [0;1mSELECT currval('orders_id_seq')[0m
  [4;35;1mPK and serial sequence (0.003210)[0m   [0m SELECT attr.attname, name.nspname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relnamespace = name.oid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'line_items'::regclass
[0m
  [4;36;1mLineItem Create (0.018441)[0m   [0;1mINSERT INTO line_items ("license_key", "order_id", "product_id", "quantity", "unit_price") VALUES(NULL, 9111, 2, 1, 12.95)[0m
  [4;35;1mSQL (0.000197)[0m   [0mSELECT currval('line_items_id_seq')[0m
  [4;36;1mSQL (0.001067)[0m   [0;1mCOMMIT[0m


OpenSSL::X509::CertificateError (header too long):
    .//lib/soap/httpconfigloader.rb:110:in `initialize'
    .//lib/soap/httpconfigloader.rb:110:in `new'
    .//lib/soap/httpconfigloader.rb:110:in `cert_from_file'
    .//lib/soap/httpconfigloader.rb:68:in `set_ssl_config'
    .//lib/soap/property.rb:140:in `each'
    .//lib/soap/property.rb:139:in `each'
    .//lib/soap/httpconfigloader.rb:61:in `set_ssl_config'
    .//lib/soap/httpconfigloader.rb:36:in `set_options'
    .//lib/soap/property.rb:115:in `call'
    .//lib/soap/property.rb:115:in `[]='
    .//lib/soap/property.rb:114:in `each'
    .//lib/soap/property.rb:114:in `[]='
    .//vendor/plugins/paypal/lib/paypal.rb:74:in `create_client'
    .//vendor/plugins/paypal/lib/paypal.rb:164:in `directcharge'
    .//app/models/order.rb:297:in `paypal_directcharge'
    .//app/controllers/store/order_controller.rb:136:in `purchase'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001334)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:45:03) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
Rendering layoutfalseactionsignin_form within layouts/error
Rendering admin/signin_form
Completed in 0.00233 (428 reqs/sec) | Rendering: 0.00220 (94%) | DB: 0.12668 (5427%) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.001327)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#signin (for 127.0.0.1 at 2007-06-23 23:45:10) [POST]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"commit"=>"Abracadabra", "username"=>"admin", "action"=>"signin", "controller"=>"admin", "password"=>"password"}
Redirected to http://localhost:3000/admin
Completed in 0.00172 (580 reqs/sec) | DB: 0.00133 (77%) | 302 Found [http://localhost/admin/signin]
  [4;35;1mSQL (0.001350)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:45:11) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001236)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000272)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.023764)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040637)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040237)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.083638)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072944)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067347)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.34871 (2 reqs/sec) | Rendering: 0.00474 (1%) | DB: 0.33143 (95%) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.001580)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#orders (for 127.0.0.1 at 2007-06-23 23:45:18) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"orders", "controller"=>"admin"}
  [4;35;1mSQL (0.006558)[0m   [0mSELECT count(*) AS count_all FROM orders WHERE (status != 'P') [0m
  [4;36;1mOrder Load (0.041964)[0m   [0;1mSELECT * FROM orders WHERE (status != 'P') ORDER BY order_time DESC LIMIT 100 OFFSET 0[0m
Rendering  within layouts/admin
Rendering admin/orders
  [4;35;1mLineItem Load (0.000577)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9110) [0m
  [4;36;1mSQL (0.001039)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mLineItem Load (0.000499)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9109) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9107) [0m
  [4;35;1mLineItem Load (0.000325)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9105) [0m
  [4;36;1mLineItem Load (0.000320)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9104) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9103) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9102) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9101) [0m
  [4;36;1mLineItem Load (0.000326)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9100) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9099) [0m
  [4;36;1mLineItem Load (0.000322)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9098) [0m
  [4;35;1mLineItem Load (0.000318)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9097) [0m
  [4;36;1mLineItem Load (0.000314)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9096) [0m
  [4;35;1mLineItem Load (0.000317)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9093) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9092) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9091) [0m
  [4;36;1mLineItem Load (0.000317)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9090) [0m
  [4;35;1mLineItem Load (0.000318)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9089) [0m
  [4;36;1mLineItem Load (0.000319)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9088) [0m
  [4;35;1mLineItem Load (0.000317)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9087) [0m
  [4;36;1mLineItem Load (0.000317)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9086) [0m
  [4;35;1mLineItem Load (0.000315)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9084) [0m
  [4;36;1mLineItem Load (0.000312)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9083) [0m
  [4;35;1mLineItem Load (0.000315)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9075) [0m
  [4;36;1mLineItem Load (0.000316)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9071) [0m
  [4;35;1mLineItem Load (0.000314)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9070) [0m
  [4;36;1mLineItem Load (0.000314)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9069) [0m
  [4;35;1mLineItem Load (0.000315)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9068) [0m
  [4;36;1mLineItem Load (0.000545)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9067) [0m
  [4;35;1mLineItem Load (0.000389)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9066) [0m
  [4;36;1mLineItem Load (0.000365)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9065) [0m
  [4;35;1mLineItem Load (0.000368)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9064) [0m
  [4;36;1mLineItem Load (0.000363)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9062) [0m
  [4;35;1mLineItem Load (0.000352)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9061) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9060) [0m
  [4;35;1mLineItem Load (0.000354)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9059) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9057) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9056) [0m
  [4;36;1mLineItem Load (0.000339)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9055) [0m
  [4;35;1mLineItem Load (0.000347)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9054) [0m
  [4;36;1mLineItem Load (0.000350)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9053) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9029) [0m
  [4;36;1mLineItem Load (0.000347)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9028) [0m
  [4;35;1mLineItem Load (0.000342)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9027) [0m
  [4;36;1mLineItem Load (0.000366)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9026) [0m
  [4;35;1mLineItem Load (0.000333)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9022) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9021) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9020) [0m
  [4;36;1mLineItem Load (0.000335)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9018) [0m
  [4;35;1mLineItem Load (0.000334)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9017) [0m
  [4;36;1mLineItem Load (0.000331)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9016) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9015) [0m
  [4;36;1mLineItem Load (0.000374)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9014) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9013) [0m
  [4;36;1mLineItem Load (0.000340)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9012) [0m
  [4;35;1mLineItem Load (0.000325)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9011) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9010) [0m
  [4;35;1mLineItem Load (0.000326)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9009) [0m
  [4;36;1mLineItem Load (0.000323)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9008) [0m
  [4;35;1mLineItem Load (0.000322)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9007) [0m
  [4;36;1mLineItem Load (0.000337)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9006) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 9003) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9000) [0m
  [4;35;1mLineItem Load (0.000356)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8612) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8611) [0m
  [4;35;1mLineItem Load (0.000321)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8610) [0m
  [4;36;1mLineItem Load (0.000324)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8609) [0m
  [4;35;1mLineItem Load (0.000328)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8608) [0m
  [4;36;1mLineItem Load (0.000323)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8607) [0m
  [4;35;1mLineItem Load (0.000320)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8606) [0m
  [4;36;1mLineItem Load (0.000386)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8605) [0m
  [4;35;1mLineItem Load (0.000331)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8604) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8603) [0m
  [4;35;1mLineItem Load (0.000414)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8602) [0m
  [4;36;1mLineItem Load (0.000338)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8601) [0m
  [4;35;1mLineItem Load (0.000322)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8600) [0m
  [4;36;1mLineItem Load (0.000325)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8599) [0m
  [4;35;1mLineItem Load (0.000332)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8598) [0m
  [4;36;1mLineItem Load (0.000337)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8597) [0m
  [4;35;1mLineItem Load (0.000336)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8596) [0m
  [4;36;1mLineItem Load (0.000330)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8595) [0m
  [4;35;1mLineItem Load (0.000331)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8594) [0m
  [4;36;1mLineItem Load (0.000335)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8593) [0m
  [4;35;1mLineItem Load (0.000331)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8592) [0m
  [4;36;1mLineItem Load (0.000445)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8591) [0m
  [4;35;1mLineItem Load (0.000347)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8590) [0m
  [4;36;1mLineItem Load (0.000369)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8589) [0m
  [4;35;1mLineItem Load (0.000340)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8588) [0m
  [4;36;1mLineItem Load (0.000342)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8587) [0m
  [4;35;1mLineItem Load (0.000349)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8586) [0m
  [4;36;1mLineItem Load (0.000343)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8585) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8584) [0m
  [4;36;1mLineItem Load (0.000337)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8583) [0m
  [4;35;1mLineItem Load (0.000324)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8582) [0m
  [4;36;1mLineItem Load (0.000322)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8581) [0m
  [4;35;1mLineItem Load (0.000330)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8580) [0m
  [4;36;1mLineItem Load (0.000328)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8579) [0m
  [4;35;1mLineItem Load (0.000382)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8578) [0m
  [4;36;1mLineItem Load (0.000353)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 8577) [0m
  [4;35;1mLineItem Load (0.000337)[0m   [0mSELECT * FROM line_items WHERE (line_items.order_id = 8576) [0m
Completed in 0.35661 (2 reqs/sec) | Rendering: 0.26385 (73%) | DB: 0.08538 (23%) | 200 OK [http://localhost/admin/orders]
  [4;36;1mSQL (0.001329)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing OrderController#index (for 127.0.0.1 at 2007-06-23 23:46:23) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"store/order"}
DEPRECATION WARNING: find_all is deprecated and will be removed from Rails 2.0 (use find(:all, ...))  See http://www.rubyonrails.org/deprecation for details. (called from new at ./script/../config/../app/controllers/store/order_controller.rb:25)
  [4;35;1mProduct Load (0.000530)[0m   [0mSELECT * FROM products WHERE (products."active" = 1) [0m
Rendering layoutfalseactionnew within layouts/store
Rendering store/order/new
  [4;36;1mSQL (0.001230)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
Completed in 0.01449 (69 reqs/sec) | Rendering: 0.00451 (31%) | DB: 0.00309 (21%) | 200 OK [http://localhost/store/]


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:46:23) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {}


ActionController::RoutingError (no route found to match "/themes/potionfactory/images/store/vc_small.png" with {:method=>:get}):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1292:in `recognize_path'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1282:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:46:23) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {}


ActionController::RoutingError (no route found to match "/themes/potionfactory/images/store/tgr_small.png" with {:method=>:get}):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1292:in `recognize_path'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1282:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing OrderController#payment (for 127.0.0.1 at 2007-06-23 23:46:26) [POST]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"items"=>{"2"=>"1", "3"=>""}, "commit"=>"  Continue →", "action"=>"payment", "controller"=>"store/order", "payment_type"=>"cc", "coupon"=>""}
  [4;35;1mSQL (0.001377)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.001211)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.000468)[0m   [0mSELECT * FROM orders WHERE (orders."id" = 0) [0m
  [4;36;1mSQL (0.001187)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mProduct Load (0.000329)[0m   [0mSELECT * FROM products WHERE (products."id" = 2) [0m
  [4;36;1mSQL (0.000171)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000144)[0m   [0mCOMMIT[0m
  [4;36;1mProduct Load (0.000356)[0m   [0;1mSELECT * FROM products WHERE (products."id" = 2) [0m
Rendering layoutfalseactionpayment_cc within layouts/store
Rendering store/order/payment_cc
Rendered store/order/_form_countries (0.00240)
Rendered store/order/_form_months (0.00010)
Completed in 0.04457 (22 reqs/sec) | Rendering: 0.00812 (18%) | DB: 0.00524 (11%) | 200 OK [http://localhost/store/order/payment]


Processing OrderController#purchase (for 127.0.0.1 at 2007-06-23 23:48:12) [POST]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"items"=>{"2"=>"1"}, "commit"=>"  Place Order →", "order"=>{"address1"=>"433 S. Serrano Ave.", "company"=>"ab", "city"=>"Los Angeles", "address2"=>"", "cc_month"=>"1", "cc_number"=>"4916306176169494", "zipcode"=>"90004", "country"=>"US", "cc_code"=>"000", "first_name"=>"Byung", "payment_type"=>"Visa", "last_name"=>"someone", "comment"=>"2", "state"=>"CA", "email"=>"andykim78@gmail.com", "cc_year"=>"2007", "licensee_name"=>"Andy Kim"}, "action"=>"purchase", "onsubmit"=>"javascript:return validate();", "controller"=>"store/order"}
  [4;35;1mSQL (0.001338)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.001206)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.000418)[0m   [0mSELECT * FROM orders WHERE (orders."id" = 0) [0m
  [4;36;1mSQL (0.001178)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mProduct Load (0.000299)[0m   [0mSELECT * FROM products WHERE (products."id" = 2) [0m
  [4;36;1mSQL (0.000117)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000104)[0m   [0mCOMMIT[0m
  [4;36;1mProduct Load (0.000306)[0m   [0;1mSELECT * FROM products WHERE (products."id" = 2) [0m
  [4;35;1mSQL (0.000111)[0m   [0mBEGIN[0m
  [4;36;1mPK and serial sequence (0.003739)[0m   [0;1m SELECT attr.attname, name.nspname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relnamespace = name.oid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'orders'::regclass
[0m
  [4;35;1mOrder Create (0.000653)[0m   [0mINSERT INTO orders ("address1", "city", "company", "status", "address2", "coupon_id", "failure_reason", "zipcode", "country", "ccnum", "failure_code", "first_name", "order_time", "payment_type", "comment", "last_name", "email", "licensee_name", "state", "transaction_number") VALUES('433 S. Serrano Ave.', 'Los Angeles', 'ab', 'P', '', NULL, NULL, '90004', 'US', 'XXXXXXXXXXXX9494', NULL, 'Byung', '2007-06-23 23:48:12.826167', 'Visa', '2', 'someone', 'andykim78@gmail.com', 'Andy Kim', 'CA', NULL)[0m
  [4;36;1mSQL (0.000165)[0m   [0;1mSELECT currval('orders_id_seq')[0m
  [4;35;1mPK and serial sequence (0.003171)[0m   [0m SELECT attr.attname, name.nspname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relnamespace = name.oid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'line_items'::regclass
[0m
  [4;36;1mLineItem Create (0.000521)[0m   [0;1mINSERT INTO line_items ("license_key", "order_id", "product_id", "quantity", "unit_price") VALUES(NULL, 9112, 2, 1, 12.95)[0m
  [4;35;1mSQL (0.000161)[0m   [0mSELECT currval('line_items_id_seq')[0m
  [4;36;1mSQL (0.000781)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000112)[0m   [0mBEGIN[0m
  [4;36;1mLineItem Update (0.023195)[0m   [0;1mUPDATE line_items SET "order_id" = 9112, "product_id" = 2, "unit_price" = 12.95, "license_key" = 'VC-JDA24NEKUAO3YXRE', "quantity" = 1 WHERE "id" = 9194[0m
  [4;35;1mSQL (0.000575)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000183)[0m   [0;1mBEGIN[0m
  [4;35;1mOrder Update (0.000774)[0m   [0mUPDATE orders SET "transaction_number" = NULL, "company" = 'ab', "licensee_name" = 'Andy Kim', "email" = 'andykim78@gmail.com', "ccnum" = 'XXXXXXXXXXXX9494', "payment_type" = 'Visa', "city" = 'Los Angeles', "zipcode" = '90004', "coupon_id" = NULL, "order_time" = '2007-06-23 23:48:12.826167', "address2" = '', "country" = 'US', "failure_reason" = NULL, "status" = 'C', "address1" = '433 S. Serrano Ave.', "state" = 'CA', "failure_code" = NULL, "last_name" = 'someone', "comment" = '2', "first_name" = 'Byung' WHERE "id" = 9112[0m
  [4;36;1mSQL (0.000599)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/store/order/thankyou
Rendered ../store/order/_receipt (0.03357)
Sent mail:
 From: My Company <info@mycompany.com>
To: andykim78@gmail.com
Bcc: orders@mycompany.com
Subject: Purchase Receipt for Order #9112 *
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary=mimepart_467e13ace81dd_4a8719f4c4a140


--mimepart_467e13ace81dd_4a8719f4c4a140
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: Quoted-printable
Content-Disposition: inline

Dear Byung someone,

Thank you for purchasing My Company software.
Below are your application license keys. To activate, please copy
and paste the code to the registration window in the application.

Voice Candy v1:
VC-JDA24NEKUAO3YXRE


Please let us know if you have any questions or comments.
Enjoy your purchase.

- My Company



RECEIPT
----------------------------------------------------------------------

Order Number: 9112

Placed On: Sun Jun 24 06:48:12 UTC 2007

Registered-To: Byung someone
Company: ab
Email: andykim78@gmail.com

Billing Address:
433 S. Serrano Ave.
Los Angeles, CA 90004
United States

Payment:
Visa, XXXXXXXXXXXX9494

Purchased Items:

1 Voice Candy v1 @ $12.95 each

Total: $12.95


--mimepart_467e13ace81dd_4a8719f4c4a140
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: Base64
Content-Disposition: inline

PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAg
VHJhbnNpdGlvbmFsLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1s
MS9EVEQveGh0bWwxLXRyYW5zaXRpb25hbC5kdGQiPgo8aHRtbCB4bWxucz0i
aHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+CjxoZWFkPgogICAgPG1l
dGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0
bWw7IGNoYXJzZXQ9VVRGLTgiLz4KICAgIDx0aXRsZT5NeSBDb21wYW55IFJl
Y2VpcHQ8L3RpdGxlPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5w
YWdlIHsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IHdpZHRoOjU1MHB4OyB9
CglpbWcgeyBib3JkZXI6IDA7IH0KCWgzIHsgbWFyZ2luLXRvcDogMzBweDsg
fQoJcCB7IGZvbnQtZmFtaWx5OiBoZWx2ZXRpY2EsIHNhbnMtc2VyaWY7IGZv
bnQtc2l6ZTogMTNweDsgbGluZS1oZWlnaHQ6IDE4cHg7IG1hcmdpbi10b3A6
IDEwcHg7IH0KCXAucHMsIGxpIHsgZm9udC1mYW1pbHk6IGhlbHZldGljYTsg
Zm9udC1zaXplOiAxMnB4OyBsaW5lLWhlaWdodDogMThweDsgfQoJcHJlIHsg
cGFkZGluZzoxMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7IH0KCWRpdi5k
IHsgaGVpZ2h0OjFweDsgbWFyZ2luOjIwcHggMCAxMHB4OyBib3JkZXItdG9w
OjFweCBkb3R0ZWQgIzk5OTsgfQoJZGl2LnMgeyBoZWlnaHQ6MXg7IG1hcmdp
bjogMjBweCAwIDEwcHg7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+
CjxkaXYgY2xhc3M9InBhZ2UiPgogICAgPGRpdiBjbGFzcz0iY2xlYXIiPjwv
ZGl2PgogICAgPGRpdiBpZD0iY29udGVudCI+Cgk8cD5EZWFyIEJ5dW5nIHNv
bWVvbmUsPC9wPgoKCTxwPgoJICAgIFRoYW5rIHlvdSBmb3IgcHVyY2hhc2lu
ZyBNeSBDb21wYW55IHNvZnR3YXJlLiBZb3VyIGxpY2Vuc2Uga2V5cyBhcmUg
YmVsb3cuIElmIHlvdSBhbHJlYWR5IGhhdmUgdGhlIGFwcGxpY2F0aW9uCgkg
ICAgaW5zdGFsbGVkLCB5b3UgY2FuIGFjdGl2YXRlIGJ5IGNsaWNraW5nIHRo
ZSAiQWN0aXZhdGUgTm93IiBsaW5rLgoJPC9wPgoKCTxoMz5MSUNFTlNFIEtF
WTwvaDM+CjxwcmU+ClZvaWNlIENhbmR5IHYxOgpWQy1KREEyNE5FS1VBTzNZ
WFJFIDxhIGhyZWY9IngtY29tLXBvdGlvbmZhY3RvcnktbGljZW5zZS12b2lj
ZWNhbmR5Oi8vVkMtSkRBMjRORUtVQU8zWVhSRSI+QWN0aXZhdGUgTm93PC9h
Pgo8L3ByZT4KCgk8ZGl2IGNsYXNzPSJzIj48L2Rpdj4KCTxwPlBsZWFzZSBs
ZXQgdXMga25vdyBpZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zIG9yIGNvbW1l
bnRzLiBFbmpveSB5b3VyIHB1cmNoYXNlLjwvcD4KICAKCTxwPi0gTXkgQ29t
cGFueTwvcD4KICAKCTxkaXYgY2xhc3M9ImQiPjwvZGl2PgoJPHN0eWxlIHR5
cGU9InRleHQvY3NzIj4KI3JlY2VpcHQgdGFibGUgeyB3aWR0aDo1NTBweDsg
fQo8L3N0eWxlPgoKPGRpdiBpZD0icmVjZWlwdCIgc3R5bGU9ImZvbnQtZmFt
aWx5OmhlbHZldGljYSxhcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMnB4
O2xpbmUtaGVpZ2h0OjE4cHg7bWFyZ2luLXRvcDozMHB4OyI+CiAgICA8dGFi
bGUgc3R5bGU9ImJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZSI+CiAgICAgICAg
PHRyIGNsYXNzPSJzIj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5n
OjVweCAwIDEycHggMDtib3JkZXItYm90dG9tOiAxcHggc29saWQgIzc3NyI+
CgkJCQk8aDIgc3R5bGU9Im1hcmdpbjowO2NvbG9yOiMzMzMiPgoJCQkJCVJl
Y2VpcHQKCQkJCTwvaDI+CgkJCTwvdGQ+CiAgICAgICAgICAgIDx0ZCBpZD0i
b3JkZXJfbnVtYmVyIiBzdHlsZT0icGFkZGluZzo1cHggMCAxMnB4IDA7dmVy
dGljYWwtYWxpZ246Ym90dG9tO2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAj
Nzc3Ij4KCQkJCTxoMyBzdHlsZT0ibWFyZ2luOjA7cGFkZGluZzowO2NvbG9y
OiMzMzM7ZGlzcGxheTppbmxpbmUiPgoJCQkJCU9yZGVyIE51bWJlcjogOTEx
MgoJCQkJPC9oMz4KCQkJPC90ZD4KICAgICAgICA8L3RyPgogICAgICAgIDx0
ciBjbGFzcz0iciI+CiAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIyIiBzdHls
ZT0icGFkZGluZzo1cHggMDtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Rk
ZCI+CgkJCQk8c3Ryb25nPlRpbWU6PC9zdHJvbmc+IFN1biBKdW4gMjQgMDY6
NDg6MTIgVVRDIDIwMDcKCQkJPC90ZD4KICAgICAgICA8L3RyPgoKICAgICAg
ICA8dHIgY2xhc3M9InIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRp
bmc6NXB4IDA7Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQiPgoJCQkJ
PHN0cm9uZz5MaWNlbnNlZCB0bzo8L3N0cm9uZz4gQW5keSBLaW0KCQkJPC90
ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjVweCAwO2JvcmRl
ci1ib3R0b206IDFweCBzb2xpZCAjZGRkIj4KCQkJCSAgICAgICAgICAgICAg
ICA8c3Ryb25nPkNvbXBhbnk6PC9zdHJvbmc+IGFiICAgICAgICAgICAgICAg
IDwvdGQ+CgkJCTwvdHI+CiAgICAgICAgPHRyIGNsYXNzPSJyIj4KICAgICAg
ICAgICAgPHRkIGNvbHNwYW49IjIiIHN0eWxlPSJwYWRkaW5nOjVweCAwO2Jv
cmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkIj4KCQkJCTxzdHJvbmc+RW1h
aWw6PC9zdHJvbmc+IGFuZHlraW03OEBnbWFpbC5jb20KCQkJPC90ZD4KICAg
ICAgICA8L3RyPgogICAgICAgIDx0ciBjbGFzcz0iZCI+CiAgICAgICAgICAg
IDx0ZCBzdHlsZT0icGFkZGluZzo1cHggMDtib3JkZXItYm90dG9tOiAzcHgg
ZG91YmxlICNkZGQiPgogICAgICAgICAgICAgICAgPHN0cm9uZz5CaWxsaW5n
IEFkZHJlc3M6PC9zdHJvbmc+PGJyLz4KCQkJCUJ5dW5nIHNvbWVvbmU8YnIv
PgoJCQkJICAgICAgICAgICAgICAgIDQzMyBTLiBTZXJyYW5vIEF2ZS48YnIv
PgogICAgICAgICAgICAgICAgTG9zIEFuZ2VsZXMsIENBIDkwMDA0PGJyLz4K
ICAgICAgICAgICAgICAgIFVuaXRlZCBTdGF0ZXMKCQkJCSAgICAgICAgICAg
IDwvdGQ+CgkJCTx0ZCBpZD0icGF5bWVudCIgc3R5bGU9IndpZHRoOjM1JTtw
YWRkaW5nOjVweCAwO2JvcmRlci1ib3R0b206IDNweCBkb3VibGUgI2RkZCI+
CgkJCQk8c3Ryb25nPlBheW1lbnQ6PC9zdHJvbmc+PGJyLz4KICAgICAgICAg
ICAgICAgIFZpc2EKCQkJCQoJCQkJPGJyLz5YWFhYWFhYWFhYWFg5NDk0CgkJ
CQkKCQkJPC90ZD4KICAgICAgICA8L3RyPgoJCTwvdGFibGU+CgkJPHRhYmxl
IHN0eWxlPSJib3JkZXItY29sbGFwc2U6Y29sbGFwc2UiPgoJCQk8dHIgY2xh
c3M9InIiPgoJCQkJPHRoIHN0eWxlPSJwYWRkaW5nOjVweCAwO2JvcmRlci1i
b3R0b206IDFweCBzb2xpZCAjZGRkIj5JdGVtPC90aD4KCQkJCTx0aCBzdHls
ZT0icGFkZGluZzo1cHggMDtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Rk
ZCI+TGljZW5zZSBLZXk8L3RoPgoJCQkJPHRoIHN0eWxlPSJwYWRkaW5nOjVw
eCAwO2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO3RleHQtYWxpZ246
bGVmdDsiIGNsYXNzPSJ1bml0Ij5Vbml0IFByaWNlPC90aD4KCQkJCTx0aCBz
dHlsZT0icGFkZGluZzo1cHggMDtib3JkZXItYm90dG9tOiAxcHggc29saWQg
I2RkZCI+UXR5PC90aD4KCQkJCTx0aCBzdHlsZT0icGFkZGluZzo1cHggMDti
b3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZCI+UHJpY2U8L3RoPgoJCQk8
L3RyPgoJCQkJCQk8dHIgY2xhc3M9InIiPgoJCQkJPHRkIGNsYXNzPSJwcm9k
IiBzdHlsZT0icGFkZGluZzo1cHggMDtib3JkZXItYm90dG9tOiAxcHggc29s
aWQgI2RkZCI+CgkJCQkJVm9pY2UgQ2FuZHkgdjEKCQkJCTwvdGQ+CgkJCQk8
dGQgY2xhc3M9ImxpY2Vuc2Vfa2V5IiBzdHlsZT0icGFkZGluZzo1cHggMDt0
ZXh0LWFsaWduOmNlbnRlcjtib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Rk
ZCI+CgkJCQkJVkMtSkRBMjRORUtVQU8zWVhSRQoJCQkJPC90ZD4KCQkJCTx0
ZCBjbGFzcz0idW5pdCIgc3R5bGU9InBhZGRpbmc6NXB4IDA7dGV4dC1hbGln
bjpjZW50ZXI7d2lkdGg6MTIlO2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAj
ZGRkIj4KCQkJCQkkMTIuOTUKCQkJCTwvdGQ+CgkJCQk8dGQgY2xhc3M9InF0
eSIgc3R5bGU9InBhZGRpbmc6NXB4IDA7dGV4dC1hbGlnbjpjZW50ZXI7d2lk
dGg6MTIlO2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkIj4KCQkJCQkx
CgkJCQk8L3RkPgoJCQkJPHRkIGNsYXNzPSJwcmljZSIgc3R5bGU9InBhZGRp
bmc6NXB4IDA7dGV4dC1hbGlnbjpyaWdodDt3aWR0aDoxMSU7Ym9yZGVyLWJv
dHRvbTogMXB4IHNvbGlkICNkZGQiPgoJCQkJCSQxMi45NQoJCQkJPC90ZD4K
CQkJPC90cj4KCQkJCQkJCQkJPHRyIGlkPSJ0b3RhbCIgY2xhc3M9InIiPgoJ
CQkJPHRkIGNvbHNwYW49IjMiIHN0eWxlPSJwYWRkaW5nOjVweCAwO2JvcmRl
ci1ib3R0b206IDFweCBzb2xpZCAjZGRkIj48L3RkPgoJCQkJPHRkIGNsYXNz
PSJxdHkiIHN0eWxlPSJwYWRkaW5nOjVweCAwO2JvcmRlci1ib3R0b206IDFw
eCBzb2xpZCAjZGRkO3RleHQtYWxpZ246Y2VudGVyIj4KCQkJCQk8c3Ryb25n
PlRvdGFsOjwvc3Ryb25nPgoJCQkJPC90ZD4KCQkJCTx0ZCBjbGFzcz0icHJp
Y2UiIHN0eWxlPSJwYWRkaW5nOjVweCAwO2JvcmRlci1ib3R0b206IDFweCBz
b2xpZCAjZGRkO3RleHQtYWxpZ246cmlnaHQiPgoJCQkJCTxzdHJvbmc+JDEy
Ljk1PC9zdHJvbmc+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQkJCQk8dHIgY2xh
c3M9InIiPgoJCQkJPHRkIGNvbHNwYW49IjUiIHN0eWxlPSJwYWRkaW5nOjVw
eCAwO2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkIj4KCQkJCQk8c3Ry
b25nPkNvbW1lbnQ6PC9zdHJvbmc+IDIKCQkJCTwvdGQ+CgkJCTwvdHI+CgkJ
CQkJPC90YWJsZT4KCTwvZGl2PgoKCgoJICAgIDwvZGl2Pgo8L2Rpdj4KPC9i
b2R5Pgo8L2h0bWw+Cgo=

--mimepart_467e13ace81dd_4a8719f4c4a140--



Errno::ECONNREFUSED (Connection refused - connect(2)):
    /usr/local/lib/ruby/1.8/net/protocol.rb:206:in `initialize'
    /usr/local/lib/ruby/1.8/net/protocol.rb:206:in `new'
    /usr/local/lib/ruby/1.8/net/protocol.rb:206:in `old_open'
    /usr/local/lib/ruby/1.8/timeout.rb:56:in `timeout'
    /usr/local/lib/ruby/1.8/timeout.rb:76:in `timeout'
    /usr/local/lib/ruby/1.8/net/protocol.rb:206:in `old_open'
    /usr/local/lib/ruby/1.8/net/smtp.rb:393:in `do_start'
    /usr/local/lib/ruby/1.8/net/smtp.rb:378:in `start'
    /usr/local/lib/ruby/1.8/net/smtp.rb:316:in `start'
    /usr/local/lib/ruby/gems/1.8/gems/actionmailer-1.3.3/lib/action_mailer/base.rb:565:in `perform_delivery_smtp'
    /usr/local/lib/ruby/gems/1.8/gems/actionmailer-1.3.3/lib/action_mailer/base.rb:451:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionmailer-1.3.3/lib/action_mailer/base.rb:451:in `deliver!'
    /usr/local/lib/ruby/gems/1.8/gems/actionmailer-1.3.3/lib/action_mailer/base.rb:333:in `method_missing'
    .//app/controllers/store/order_controller.rb:229:in `finish_order'
    .//app/controllers/store/order_controller.rb:138:in `purchase'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001348)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing OrderController#thankyou (for 127.0.0.1 at 2007-06-23 23:48:24) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"thankyou", "controller"=>"store/order"}
Rendering  within layouts/store
Rendering store/order/thankyou
  [4;36;1mLineItem Load (0.000536)[0m   [0;1mSELECT * FROM line_items WHERE (line_items.order_id = 9112) [0m
  [4;35;1mSQL (0.001013)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'line_items'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.001178)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mProduct Load (0.000303)[0m   [0mSELECT * FROM products WHERE (products."id" = 2) [0m
Rendered store/order/_receipt (0.00554)
Completed in 0.03340 (29 reqs/sec) | Rendering: 0.02761 (82%) | DB: 0.04408 (131%) | 200 OK [http://localhost/store/order/thankyou]
  [4;36;1mSQL (0.001330)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:48:56) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001230)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000269)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.042041)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.041200)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039952)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081323)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072906)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066748)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36276 (2 reqs/sec) | Rendering: 0.00466 (1%) | DB: 0.34700 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001544)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:50:41) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001311)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000306)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.041085)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040111)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040134)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081564)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072849)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067025)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36193 (2 reqs/sec) | Rendering: 0.00426 (1%) | DB: 0.34593 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001511)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:50:53) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001276)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000296)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.040560)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040205)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040665)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.082594)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072759)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066975)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36363 (2 reqs/sec) | Rendering: 0.00534 (1%) | DB: 0.34684 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001503)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:51:02) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001275)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000292)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.040162)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040152)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040037)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081521)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.073010)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067583)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36118 (2 reqs/sec) | Rendering: 0.00464 (1%) | DB: 0.34554 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001501)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing ApplicationController#index (for 127.0.0.1 at 2007-06-23 23:51:10) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}


SyntaxError (./script/../config/../app/controllers/admin_controller.rb:132: syntax error, unexpected tIDENTIFIER, expecting kTHEN or ':' or '\n' or ';'
    if @monthy is not nil
                 ^
./script/../config/../app/controllers/admin_controller.rb:350: syntax error, unexpected kEND, expecting $end):
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:203:in `load_without_new_constant_marking'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:203:in `load_file'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:202:in `load_file'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:94:in `require_or_load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:248:in `load_missing_constant'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:452:in `const_missing'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:464:in `const_missing'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/inflector.rb:250:in `constantize'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/core_ext/string/inflections.rb:148:in `constantize'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/routing.rb:1284:in `recognize'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:40:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001327)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:51:16) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001810)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000317)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.040992)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.041895)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.041178)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.084034)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.089120)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067801)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.38436 (2 reqs/sec) | Rendering: 0.00465 (1%) | DB: 0.36997 (96%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001507)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:53:51) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001278)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000289)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039939)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040230)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040340)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.082266)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.076236)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067043)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36623 (2 reqs/sec) | Rendering: 0.00472 (1%) | DB: 0.34913 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001528)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:54:52) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001306)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000298)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039925)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040099)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040349)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081484)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072956)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.066921)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36243 (2 reqs/sec) | Rendering: 0.00549 (1%) | DB: 0.34487 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001515)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:56:41) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001293)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000292)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039822)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040023)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039978)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081289)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072699)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067042)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.35965 (2 reqs/sec) | Rendering: 0.00466 (1%) | DB: 0.34395 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001494)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:57:08) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001276)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000297)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039844)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040036)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040009)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081294)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072996)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067404)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36239 (2 reqs/sec) | Rendering: 0.00532 (1%) | DB: 0.34465 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001492)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:57:28) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001304)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000304)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039947)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040015)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039967)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081507)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072755)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067540)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.empty?):
    .//app/controllers/admin_controller.rb:135:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001506)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:57:48) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001392)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000317)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.040025)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040145)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039999)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081297)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.073321)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067785)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NameError (undefined local variable or method `monthy' for #<AdminController:0x32f29cc>):
    .//app/controllers/admin_controller.rb:135:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;36;1mSQL (0.001497)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:57:54) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001270)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000294)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039831)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040023)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039986)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081609)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072868)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067541)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.count):
    .//app/controllers/admin_controller.rb:135:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001495)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-23 23:58:25) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001282)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000296)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039841)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.042199)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.041104)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.084305)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.074511)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.068270)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.count):
    .//app/controllers/admin_controller.rb:136:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;36;1mSQL (0.001508)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:00:10) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001275)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000299)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039888)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040023)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040045)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081315)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072977)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066883)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.length):
    .//app/controllers/admin_controller.rb:136:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001496)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:02:00) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001283)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000296)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039857)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039941)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039884)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081378)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072955)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.066889)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.length):
    .//app/controllers/admin_controller.rb:136:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;36;1mSQL (0.000469)[0m   [0;1mSET client_encoding TO 'utf8'[0m
  [4;35;1mSQL (0.007347)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:02:09) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001351)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000979)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.045343)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039895)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039778)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081363)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.074440)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.066900)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.length):
    .//app/controllers/admin_controller.rb:136:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;36;1mSQL (0.001497)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:02:32) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001285)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000364)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.040368)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.041002)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040520)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081385)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072873)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066829)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.length):
    .//app/controllers/admin_controller.rb:136:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;35;1mSQL (0.001481)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:02:40) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001270)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000288)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039654)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039877)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039835)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081362)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072577)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.066781)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m


NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.length):
    .//app/controllers/admin_controller.rb:136:in `index'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:1095:in `perform_action_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (500 Internal Error)
  [4;36;1mSQL (0.001487)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:02:50) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001304)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000292)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039823)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040824)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039852)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081359)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072843)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066899)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.38102 (2 reqs/sec) | Rendering: 0.02503 (6%) | DB: 1.39180 (365%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001491)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:02:57) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001258)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000290)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039647)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039979)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039808)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081178)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.073179)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.068753)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36143 (2 reqs/sec) | Rendering: 0.00475 (1%) | DB: 0.34558 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001488)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:03:08) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001277)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000293)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.039891)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.040030)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040475)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.082289)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.073555)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.067600)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36247 (2 reqs/sec) | Rendering: 0.00421 (1%) | DB: 0.34690 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001492)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:03:32) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001277)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000302)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039710)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.051424)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039835)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081373)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072718)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067129)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.37114 (2 reqs/sec) | Rendering: 0.00468 (1%) | DB: 0.35526 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001514)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:03:38) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001327)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000347)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.040234)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039849)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040453)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081100)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072628)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066745)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.35960 (2 reqs/sec) | Rendering: 0.00414 (1%) | DB: 0.34420 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001490)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:03:56) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001272)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000292)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.040105)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040199)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039980)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081427)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072998)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.067013)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36177 (2 reqs/sec) | Rendering: 0.00467 (1%) | DB: 0.34478 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001502)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:05:09) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSQL (0.001273)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mSQL (0.000302)[0m   [0;1mSELECT count(*) AS count_all FROM products [0m
  [4;35;1mOrder Load (0.041236)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039810)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039823)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.081210)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.072681)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066783)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(COALESCE(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * COALESCE(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36077 (2 reqs/sec) | Rendering: 0.00420 (1%) | DB: 0.34462 (95%) | 200 OK [http://localhost/admin/]
  [4;35;1mSQL (0.001486)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:12:15) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001255)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000297)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039754)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.039947)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039990)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081395)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.072866)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;35;1mOrder Load (0.068661)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.36304 (2 reqs/sec) | Rendering: 0.00447 (1%) | DB: 0.34565 (95%) | 200 OK [http://localhost/admin/]
  [4;36;1mSQL (0.001491)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#login (for 127.0.0.1 at 2007-06-24 00:12:19) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"login", "controller"=>"admin"}


ActionController::UnknownAction (No action responded to login):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)
  [4;35;1mSQL (0.001326)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m


Processing AdminController#logon (for 127.0.0.1 at 2007-06-24 00:12:22) [GET]
  Session ID: 7c73f9defbf3304726a2977f2eae82c8
  Parameters: {"action"=>"logon", "controller"=>"admin"}


ActionController::UnknownAction (No action responded to logon):
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:632:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:638:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:438:in `call'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:637:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:634:in `call_filter'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:619:in `perform_action_without_benchmark'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/1.8/benchmark.rb:293:in `measure'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/benchmarking.rb:66:in `perform_action_without_rescue'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/rescue.rb:83:in `perform_action'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `send'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:430:in `process_without_filters'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/filters.rb:624:in `process_without_session_management_support'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/session_management.rb:114:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/base.rb:330:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/dispatcher.rb:41:in `dispatch'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:78:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `synchronize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/rails.rb:76:in `process'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:618:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:617:in `process_client'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:736:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `initialize'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `new'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.rb:720:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:271:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `each'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/configurator.rb:270:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:127:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel/command.rb:211:in `run'
    /usr/local/lib/ruby/gems/1.8/gems/mongrel-1.0.1/bin/mongrel_rails:243
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:488:in `load'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/servers/mongrel.rb:60
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:342:in `new_constants_in'
    /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.2/lib/active_support/dependencies.rb:495:in `require'
    /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.3/lib/commands/server.rb:39
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `gem_original_require'
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in `require'
    script/server:3


Rendering /usr/local/lib/ruby/gems/1.8/gems/actionpack-1.13.3/lib/action_controller/templates/rescues/layout.rhtml (404 Page Not Found)


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:12:33) [GET]
  Session ID: 1c87af64050ec770da98a9dae64141e5
  Parameters: {"action"=>"index", "controller"=>"admin"}
Rendering layoutfalseactionsignin_form within layouts/error
Rendering admin/signin_form
Completed in 0.02507 (39 reqs/sec) | Rendering: 0.02492 (99%) | DB: 0.00282 (11%) | 200 OK [http://localhost/admin/]


Processing AdminController#signin (for 127.0.0.1 at 2007-06-24 00:12:41) [POST]
  Session ID: 1c87af64050ec770da98a9dae64141e5
  Parameters: {"commit"=>"Abracadabra", "username"=>"admin", "action"=>"signin", "controller"=>"admin", "password"=>"1"}
Rendering layoutfalseactionsignin_form within layouts/error
Rendering admin/signin_form
Completed in 0.00290 (344 reqs/sec) | Rendering: 0.00187 (64%) | DB: 0.00000 (0%) | 200 OK [http://localhost/admin/signin]


Processing AdminController#signin (for 127.0.0.1 at 2007-06-24 00:13:05) [POST]
  Session ID: 1c87af64050ec770da98a9dae64141e5
  Parameters: {"commit"=>"Abracadabra", "username"=>"admin", "action"=>"signin", "controller"=>"admin", "password"=>"password"}
Redirected to http://localhost:3000/admin
Completed in 0.00165 (604 reqs/sec) | DB: 0.00000 (0%) | 302 Found [http://localhost/admin/signin]


Processing AdminController#index (for 127.0.0.1 at 2007-06-24 00:13:05) [GET]
  Session ID: 1c87af64050ec770da98a9dae64141e5
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSQL (0.001309)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'products'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mSQL (0.000299)[0m   [0mSELECT count(*) AS count_all FROM products [0m
  [4;36;1mOrder Load (0.039989)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 1 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 1 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.040009)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 7 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 7 <= order_time

 group by product[0m
  [4;36;1mOrder Load (0.039910)[0m   [0;1m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 30 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 30 <= order_time

 group by product[0m
  [4;35;1mOrder Load (0.081410)[0m   [0m
 select (select count(*)
 from orders
 where status = 'C' and
 payment_type != 'free' and
 current_date - 365 <= order_time) as orders,
 sum(line_items.unit_price * quantity)
 - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 sum(quantity) as q,
 products.name as product

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join products on products.id = line_items.product_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and lower(payment_type) != 'free' and current_date - 365 <= order_time

 group by product[0m
  [4;36;1mSQL (0.001392)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'orders'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mOrder Load (0.072646)[0m   [0m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 date_part('day', orders.order_time) as day,
 sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders 
 inner join line_items on orders.id = line_items.order_id 
 left outer join coupons on coupons.id = orders.coupon_id 

 where status = 'C' and payment_type != 'Free'

 group by year, month, day

 order by last_time desc limit 8[0m
  [4;36;1mOrder Load (0.066987)[0m   [0;1m
 select date_part('year', orders.order_time) as year,
 date_part('month', orders.order_time) as month,
 sum(line_items.unit_price * quantity) - sum(coalesce(coupons.amount, 0))
 - sum(line_items.unit_price * quantity * coalesce(percentage, 0) / 100) as earned,
 max(orders.order_time) as last_time

 from orders
 inner join line_items on orders.id = line_items.order_id
 left outer join coupons on coupons.id = orders.coupon_id

 where status = 'C' and payment_type != 'Free'

 group by year, month

 order by last_time desc limit 8[0m
Rendering  within layouts/admin
Rendering admin/index
Completed in 0.37017 (2 reqs/sec) | Rendering: 0.00416 (1%) | DB: 0.34395 (92%) | 200 OK [http://localhost/admin]
